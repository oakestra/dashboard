<nb-accordion class="service">
    <nb-accordion-item>
        <nb-accordion-item-header class="disable_ripple">
            <p class="w3-col s4 l5 m5 service-name">
                {{ service.microservice_name }}
            </p>
            <div class="w3-col s4 l6 m6 w3-right statusField" (click)="$event.stopPropagation()">
                <div class="statusField">
                    <div *ngIf="service.status && !isLoading" class="statusField">
                        <nb-icon icon="radio-button-off-outline" [class]="service.status"></nb-icon>
                        <p class="statusText">{{ service.status }}</p>
                    </div>
                    <div *ngIf="isLoading" class="spinner">
                        <mat-spinner [diameter]="30"></mat-spinner>
                    </div>
                </div>
            </div>

            <div class="w3-col s1 l1 m1 w3-right actions">
                <button [nbContextMenu]="menuItems" [nbContextMenuTag]="menuTag" nbButton ghost type="button">
                    <nb-icon icon="more-vertical-outline"></nb-icon>
                </button>
            </div>
        </nb-accordion-item-header>
        <nb-accordion-item-body>
            <div *ngIf="service.instance_list?.length === 0 || !service.instance_list" class="noInstance">
                No instances of this service.
            </div>

            <nb-list *ngFor="let instance of service.instance_list; let i = index" class="w3-row instance">
                <nb-list-item>
                    <div class="w3-col s6 l5 m5">
                        <p>Instance {{ instance.instance_number }}</p>
                    </div>

                    <div
                        (click)="openStatusDialog(service, instance.instance_number)"
                        class="w3-col l5 m6 s6 statusField"
                    >
                        <button mat-icon-button type="button" class="serviceStatus">
                            <mat-icon [class]="instance.status">fiber_manual_record</mat-icon>
                        </button>
                        <p class="statusText">{{ instance.status }}</p>
                    </div>

                    <div class="w3-col l1 m1 s1 w3-right instance-buttons">
                        <button
                            nbTooltip="Delete Instance"
                            (click)="deleteInstance(service, instance)"
                            nbButton
                            ghost
                            type="button"
                        >
                            <nb-icon icon="trash-2"></nb-icon>
                        </button>
                        <button
                            nbTooltip="View Instance Details"
                            (click)="deleteInstance(service, instance)"
                            nbButton
                            ghost
                            type="button"
                        >
                            <nb-icon icon="arrowhead-right-outline"></nb-icon>
                        </button>
                    </div>
                </nb-list-item>
            </nb-list>
        </nb-accordion-item-body>
    </nb-accordion-item>
</nb-accordion>
